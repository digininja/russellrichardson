!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("Barba",[],factory):"object"==typeof exports?exports.Barba=factory():root.Barba=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="http://localhost:8080/dist",__webpack_require__(0)}([function(module,exports,__webpack_require__){"function"!=typeof Promise&&(window.Promise=__webpack_require__(1));var Barba={version:"1.0.0",BaseTransition:__webpack_require__(4),BaseView:__webpack_require__(6),BaseCache:__webpack_require__(8),Dispatcher:__webpack_require__(7),HistoryManager:__webpack_require__(9),Pjax:__webpack_require__(10),Prefetch:__webpack_require__(13),Utils:__webpack_require__(5)};module.exports=Barba},function(module,exports,__webpack_require__){(function(setImmediate){!function(root){function noop(){}function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}function Promise(fn){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(fn,this)}function handle(self,deferred){for(;3===self._state;)self=self._value;return 0===self._state?void self._deferreds.push(deferred):(self._handled=!0,void asap(function(){var cb=1===self._state?deferred.onFulfilled:deferred.onRejected;if(null===cb)return void(1===self._state?resolve:reject)(deferred.promise,self._value);var ret;try{ret=cb(self._value)}catch(e){return void reject(deferred.promise,e)}resolve(deferred.promise,ret)}))}function resolve(self,newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if(newValue instanceof Promise)return self._state=3,self._value=newValue,void finale(self);if("function"==typeof then)return void doResolve(bind(then,newValue),self)}self._state=1,self._value=newValue,finale(self)}catch(e){reject(self,e)}}function reject(self,newValue){self._state=2,self._value=newValue,finale(self)}function finale(self){2===self._state&&0===self._deferreds.length&&asap(function(){self._handled||onUnhandledRejection(self._value)});for(var i=0,len=self._deferreds.length;i<len;i++)handle(self,self._deferreds[i]);self._deferreds=null}function Handler(onFulfilled,onRejected,promise){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.promise=promise}function doResolve(fn,self){var done=!1;try{fn(function(value){done||(done=!0,resolve(self,value))},function(reason){done||(done=!0,reject(self,reason))})}catch(ex){if(done)return;done=!0,reject(self,ex)}}var setTimeoutFunc=setTimeout,asap="function"==typeof setImmediate&&setImmediate||function(fn){setTimeoutFunc(fn,0)},onUnhandledRejection=function(err){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",err)};Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);return handle(this,new Handler(onFulfilled,onRejected,prom)),prom},Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,function(val){res(i,val)},reject)}args[i]=val,0===--remaining&&resolve(args)}catch(ex){reject(ex)}}if(0===args.length)return resolve([]);for(var remaining=args.length,i=0;i<args.length;i++)res(i,args[i])})},Promise.resolve=function(value){return value&&"object"==typeof value&&value.constructor===Promise?value:new Promise(function(resolve){resolve(value)})},Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})},Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++)values[i].then(resolve,reject)})},Promise._setImmediateFn=function(fn){asap=fn},Promise._setUnhandledRejectionFn=function(fn){onUnhandledRejection=fn},"undefined"!=typeof module&&module.exports?module.exports=Promise:root.Promise||(root.Promise=Promise)}(this)}).call(exports,__webpack_require__(2).setImmediate)},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate){function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}var nextTick=__webpack_require__(3).nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout(function(){item._onTimeout&&item._onTimeout()},msecs))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(fn){var id=nextImmediateId++,args=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[id]=!0,nextTick(function(){immediateIds[id]&&(args?fn.apply(null,args):fn.call(null),exports.clearImmediate(id))}),id},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(id){delete immediateIds[id]}}).call(exports,__webpack_require__(2).setImmediate,__webpack_require__(2).clearImmediate)},function(module,exports){function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=cachedSetTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,cachedClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout=setTimeout}catch(e){cachedSetTimeout=function(){throw new Error("setTimeout is not defined")}}try{cachedClearTimeout=clearTimeout}catch(e){cachedClearTimeout=function(){throw new Error("clearTimeout is not defined")}}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||cachedSetTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){var Utils=__webpack_require__(5),BaseTransition={oldContainer:void 0,newContainer:void 0,newContainerLoading:void 0,extend:function(obj){return Utils.extend(this,obj)},init:function(oldContainer,newContainer){var _this=this;return this.oldContainer=oldContainer,this._newContainerPromise=newContainer,this.deferred=Utils.deferred(),this.newContainerReady=Utils.deferred(),this.newContainerLoading=this.newContainerReady.promise,this.start(),this._newContainerPromise.then(function(newContainer){_this.newContainer=newContainer,_this.newContainerReady.resolve()}),this.deferred.promise},done:function(){this.oldContainer.parentNode.removeChild(this.oldContainer),this.newContainer.style.visibility="visible",this.deferred.resolve()},start:function(){}};module.exports=BaseTransition},function(module,exports){var Utils={getCurrentUrl:function(){return window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search},cleanLink:function(url){return url.replace(/#.*/,"")},xhrTimeout:5e3,xhr:function(url){var deferred=this.deferred(),req=new XMLHttpRequest;return req.onreadystatechange=function(){if(4===req.readyState)return 200===req.status?deferred.resolve(req.responseText):deferred.reject(new Error("xhr: HTTP code is not 200"))},req.ontimeout=function(){return deferred.reject(new Error("xhr: Timeout exceeded"))},req.open("GET",url),req.timeout=this.xhrTimeout,req.setRequestHeader("x-barba","yes"),req.send(),deferred.promise},extend:function(obj,props){var newObj=Object.create(obj);for(var prop in props)props.hasOwnProperty(prop)&&(newObj[prop]=props[prop]);return newObj},deferred:function(){return new function(){this.resolve=null,this.reject=null,this.promise=new Promise(function(resolve,reject){this.resolve=resolve,this.reject=reject}.bind(this))}},getPort:function(p){var port="undefined"!=typeof p?p:window.location.port,protocol=window.location.protocol;return""!=port?parseInt(port):"http:"===protocol?80:"https:"===protocol?443:void 0}};module.exports=Utils},function(module,exports,__webpack_require__){var Dispatcher=__webpack_require__(7),Utils=__webpack_require__(5),BaseView={namespace:null,extend:function(obj){return Utils.extend(this,obj)},init:function(){var _this=this;Dispatcher.on("initStateChange",function(newStatus,oldStatus){oldStatus&&oldStatus.namespace===_this.namespace&&_this.onLeave()}),Dispatcher.on("newPageReady",function(newStatus,oldStatus,container){_this.container=container,newStatus.namespace===_this.namespace&&_this.onEnter()}),Dispatcher.on("transitionCompleted",function(newStatus,oldStatus){newStatus.namespace===_this.namespace&&_this.onEnterCompleted(),oldStatus&&oldStatus.namespace===_this.namespace&&_this.onLeaveCompleted()})},onEnter:function(){},onEnterCompleted:function(){},onLeave:function(){},onLeaveCompleted:function(){}};module.exports=BaseView},function(module,exports){var Dispatcher={events:{},on:function(e,f){this.events[e]=this.events[e]||[],this.events[e].push(f)},off:function(e,f){e in this.events!=!1&&this.events[e].splice(this.events[e].indexOf(f),1)},trigger:function(e){if(e in this.events!=!1)for(var i=0;i<this.events[e].length;i++)this.events[e][i].apply(this,Array.prototype.slice.call(arguments,1))}};module.exports=Dispatcher},function(module,exports,__webpack_require__){var Utils=__webpack_require__(5),BaseCache={data:{},extend:function(obj){return Utils.extend(this,obj)},set:function(key,val){this.data[key]=val},get:function(key){return this.data[key]},reset:function(){this.data={}}};module.exports=BaseCache},function(module,exports){var HistoryManager={history:[],add:function(url,namespace){namespace||(namespace=void 0),this.history.push({url:url,namespace:namespace})},currentStatus:function(){return this.history[this.history.length-1]},prevStatus:function(){var history=this.history;return history.length<2?null:history[history.length-2]}};module.exports=HistoryManager},function(module,exports,__webpack_require__){var Utils=__webpack_require__(5),Dispatcher=__webpack_require__(7),HideShowTransition=__webpack_require__(11),BaseCache=__webpack_require__(8),HistoryManager=__webpack_require__(9),Dom=__webpack_require__(12),Pjax={Dom:Dom,History:HistoryManager,Cache:BaseCache,cacheEnabled:!0,transitionProgress:!1,ignoreClassLink:"no-barba",start:function(){this.init()},init:function(){var container=this.Dom.getContainer(),wrapper=this.Dom.getWrapper();wrapper.setAttribute("aria-live","polite"),this.History.add(this.getCurrentUrl(),this.Dom.getNamespace(container)),Dispatcher.trigger("initStateChange",this.History.currentStatus()),Dispatcher.trigger("newPageReady",this.History.currentStatus(),{},container,this.Dom.currentHTML),Dispatcher.trigger("transitionCompleted",this.History.currentStatus()),this.bindEvents()},bindEvents:function(){document.addEventListener("click",this.onLinkClick.bind(this)),window.addEventListener("popstate",this.onStateChange.bind(this))},getCurrentUrl:function(){return Utils.cleanLink(Utils.getCurrentUrl())},goTo:function(url){window.history.pushState(null,null,url),this.onStateChange()},forceGoTo:function(url){window.location=url},load:function(url){var xhr,deferred=Utils.deferred(),_this=this;return xhr=this.Cache.get(url),xhr||(xhr=Utils.xhr(url),this.Cache.set(url,xhr)),xhr.then(function(data){var container=_this.Dom.parseResponse(data);_this.Dom.putContainer(container),_this.cacheEnabled||_this.Cache.reset(),deferred.resolve(container)},function(){_this.forceGoTo(url),deferred.reject()}),deferred.promise},getHref:function(el){if(el)return el.getAttribute&&"string"==typeof el.getAttribute("xlink:href")?el.getAttribute("xlink:href"):"string"==typeof el.href?el.href:void 0},onLinkClick:function(evt){for(var el=evt.target;el&&!this.getHref(el);)el=el.parentNode;if(this.preventCheck(evt,el)){evt.stopPropagation(),evt.preventDefault(),Dispatcher.trigger("linkClicked",el,evt);var href=this.getHref(el);this.goTo(href)}},preventCheck:function(evt,element){if(!window.history.pushState)return!1;var href=this.getHref(element);return!(!element||!href)&&(!(evt.which>1||evt.metaKey||evt.ctrlKey||evt.shiftKey||evt.altKey)&&((!element.target||"_blank"!==element.target)&&(window.location.protocol===element.protocol&&window.location.hostname===element.hostname&&(Utils.getPort()===Utils.getPort(element.port)&&(!(href.indexOf("#")>-1)&&((!element.getAttribute||"string"!=typeof element.getAttribute("download"))&&(Utils.cleanLink(href)!=Utils.cleanLink(location.href)&&!element.classList.contains(this.ignoreClassLink))))))))},getTransition:function(){return HideShowTransition},onStateChange:function(){var newUrl=this.getCurrentUrl();if(this.transitionProgress&&this.forceGoTo(newUrl),this.History.currentStatus().url===newUrl)return!1;this.History.add(newUrl);var newContainer=this.load(newUrl),transition=Object.create(this.getTransition());this.transitionProgress=!0,Dispatcher.trigger("initStateChange",this.History.currentStatus(),this.History.prevStatus());var transitionInstance=transition.init(this.Dom.getContainer(),newContainer);newContainer.then(this.onNewContainerLoaded.bind(this)),transitionInstance.then(this.onTransitionEnd.bind(this))},onNewContainerLoaded:function(container){var currentStatus=this.History.currentStatus();currentStatus.namespace=this.Dom.getNamespace(container),Dispatcher.trigger("newPageReady",this.History.currentStatus(),this.History.prevStatus(),container,this.Dom.currentHTML)},onTransitionEnd:function(){this.transitionProgress=!1,Dispatcher.trigger("transitionCompleted",this.History.currentStatus(),this.History.prevStatus())}};module.exports=Pjax},function(module,exports,__webpack_require__){var BaseTransition=__webpack_require__(4),HideShowTransition=BaseTransition.extend({start:function(){this.newContainerLoading.then(this.finish.bind(this))},finish:function(){document.body.scrollTop=0,this.done()}});module.exports=HideShowTransition},function(module,exports){var Dom={dataNamespace:"namespace",wrapperId:"barba-wrapper",containerClass:"barba-container",currentHTML:document.documentElement.innerHTML,parseResponse:function(responseText){this.currentHTML=responseText;var wrapper=document.createElement("div");wrapper.innerHTML=responseText;var titleEl=wrapper.querySelector("title");return titleEl&&(document.title=titleEl.textContent),this.getContainer(wrapper)},getWrapper:function(){var wrapper=document.getElementById(this.wrapperId);if(!wrapper)throw new Error("Barba.js: wrapper not found!");return wrapper},getContainer:function(element){if(element||(element=document.body),!element)throw new Error("Barba.js: DOM not ready!");var container=this.parseContainer(element);if(container&&container.jquery&&(container=container[0]),!container)throw new Error("Barba.js: no container found");return container},getNamespace:function(element){return element&&element.dataset?element.dataset[this.dataNamespace]:element?element.getAttribute("data-"+this.dataNamespace):null},putContainer:function(element){element.style.visibility="hidden";var wrapper=this.getWrapper();wrapper.appendChild(element)},parseContainer:function(element){return element.querySelector("."+this.containerClass)}};module.exports=Dom},function(module,exports,__webpack_require__){var Utils=__webpack_require__(5),Pjax=__webpack_require__(10),Prefetch={ignoreClassLink:"no-barba-prefetch",init:function(){return!!window.history.pushState&&(document.body.addEventListener("mouseover",this.onLinkEnter.bind(this)),void document.body.addEventListener("touchstart",this.onLinkEnter.bind(this)))},onLinkEnter:function(evt){for(var el=evt.target;el&&!Pjax.getHref(el);)el=el.parentNode;if(el&&!el.classList.contains(this.ignoreClassLink)){var url=Pjax.getHref(el);if(Pjax.preventCheck(evt,el)&&!Pjax.Cache.get(url)){var xhr=Utils.xhr(url);Pjax.Cache.set(url,xhr)}}}};module.exports=Prefetch}])});